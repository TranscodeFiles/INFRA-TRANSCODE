rabbitmq-master:
  image: rabbitmq
  environment:
    #- RABBITMQ_DEFAULT_PASS=mypass
    - RABBITMQ_ERLANG_COOKIE='secret cookie here'
  ports:
    - "5672:5672"
    - "15672:15672"

#rabbitmq-worker:
 # image: rabbitmq
 # environment:
    #- RABBITMQ_DEFAULT_PASS=mypass
 #   - RABBITMQ_ERLANG_COOKIE='secret cookie here'
 #   - CLUSTER_WITH=rabbitmq-master_1
 # links:
 #   - rabbitmq-master
 # ports:
 #   - "15673:15672"

api-core:
  build: ./core-api
  links:
    - rabbitmq-master:rabbit
  volumes: 
    - ./core-api/app:/deploy/app
  ports:
    - "8080:5000"

worker:
  build: ./core-api
  links:
    - rabbitmq-master:rabbit
  volumes: 
    - ./core-api/app:/deploy/app
  entrypoint:
    - /docker-entrypoint.sh
    - worker
